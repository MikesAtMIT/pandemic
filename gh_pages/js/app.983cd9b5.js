(function(){"use strict";var t={6764:function(t,e,a){var i=a(8935),o=a(8262),s=a(3266),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},c=[],r=a(1001),d={},l=(0,r.Z)(d,n,c,!1,null,null,null),m=l.exports,u=a(2809),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("b-button-group",{staticClass:"mb-3 game-menu"},[a("b-button",{attrs:{variant:"danger"}},[a("span",{staticClass:"font-weight-bold"},[t._v("Pandemic")])]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"New Game"},on:{click:t.onNewGame}},[a("b-icon-plus-square")],1),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-save-game",modifiers:{"modal-save-game":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"Export Game"}},[a("b-icon-download")],1),a("b-modal",{attrs:{id:"modal-save-game",title:"Export Game",size:"xl","hide-footer":""}},[a("div",{staticClass:"d-flex align-items-center mb-2"},[t._v(" Download a save game file "),a("b-button",{staticClass:"ml-2",attrs:{size:"sm"},on:{click:t.downloadGameState}},[a("b-icon-download"),t._v(" Download ")],1)],1),a("div",{staticClass:"d-flex align-items-center"},[t._v(" Or copy the following and save it in a text file "),a("b-button",{staticClass:"ml-2",attrs:{size:"sm"},on:{click:t.copyGameState}},[a("b-icon-files"),t._v(" Copy ")],1)],1),a("div",{staticClass:"p-3 text-monospace save-game-container"},[t._v(" "+t._s(t.saveGameState)+" ")])]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-load-game",modifiers:{"modal-load-game":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"Import Game"}},[a("b-icon-upload")],1),a("b-modal",{attrs:{id:"modal-load-game",title:"Import Game",size:"xl","ok-title":"Import"},on:{ok:t.loadGame}},[a("b-form-file",{staticClass:"mb-3",attrs:{accept:".txt",placeholder:"Choose a save game file...","drop-placeholder":"Drop save game file here..."},model:{value:t.loadGameFile,callback:function(e){t.loadGameFile=e},expression:"loadGameFile"}}),a("b-textarea",{attrs:{rows:"5",placeholder:"Or paste in the saved game state"},model:{value:t.loadGameState,callback:function(e){t.loadGameState=e},expression:"loadGameState"}})],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"God Mode"},on:{click:t.toggleGodMode}},[a("b-icon-lightning")],1),a("b-modal",{attrs:{id:"modal-new-game",title:"Setup Game"},on:{ok:t.newGame}},[a("div",{staticClass:"container-fluid"},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onAddCity.apply(null,arguments)}}},[a("b-form-input",{attrs:{placeholder:"Add new city..."},model:{value:t.newCity,callback:function(e){t.newCity=e},expression:"newCity"}})],1),t._l(t.cities,(function(e){return a("div",{key:e.name,staticClass:"row row-city-setup my-1"},[a("div",{staticClass:"col"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"col"},[a("b-button-group",[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.changeCityCount({cityName:e.name,count:-1})}}},[t._v(" - ")]),a("b-button",{staticClass:"city-setup-count",attrs:{variant:"outline-dark",disabled:"",size:"sm"}},[t._v(" "+t._s(e.count)+" ")]),a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.changeCityCount({cityName:e.name,count:1})}}},[t._v(" + ")])],1)],1),a("div",{staticClass:"col"},[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.removeCity(e.name)}}},[t._v(" Ã— ")])],1)])}))],2)])],1),a("div",{staticClass:"board"},[t.gameStarted?a("stack",{attrs:{stack:t.createStack("Cities"),"show-names":""}}):t._e(),t._l(t.stacks,(function(e,i){return a("stack",{key:i,attrs:{stack:e,alt:t.hasAlt(e),active:i===t.numStacks,"stack-names":t.stackNames},on:{"move-card":function(a,i){return t.onMoveCard(e,a,i)},"god-mode-move-card":function(a,i){return t.onGodModeMoveCard(e,a,i)}}})}))],2)],1)},v=[],f=a(4665),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stack"},[a("h2",[t._v(t._s(t.stack.name))]),t._l(t.cities,(function(e){return a("div",{key:e.name,staticClass:"city-row",class:e.highlight?"highlight":"",on:{mouseover:function(){return t.onMouseover(e.name)},mouseleave:function(){return t.onMouseleave(e.name)}}},[t.showNames?a("span",[t._v(t._s(e.name))]):t._e(),t._l(t.cardsByCity[e.name],(function(e){return a("card",{key:e.id,attrs:{card:e,alt:t.alt,active:t.active,"stack-names":t.stackNames},on:{click:t.onClick,"god-mode-click":t.onGodModeClick}})}))],2)}))],2)},p=[],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-button",{staticClass:"p-card mx-1 px-0",attrs:{id:"card-"+t.card.id,variant:t.godMode?"success":t.disabled?"secondary":t.alt&&t.shift?"danger":"primary",disabled:t.disabled},on:{click:t.onClick}},[t.godMode?[t._v(" "+t._s(t.card.id)+" ")]:t._e()],2),a("b-popover",{attrs:{target:"card-"+t.card.id,triggers:"focus",disabled:!t.godMode}},[a("h5",[t._v("Move card to")]),t._l(t.stackNames,(function(e){return a("b-button",{key:e,attrs:{size:"sm",block:""},on:{click:function(a){return t.onGodModeClick(e)}}},[t._v(" "+t._s(e)+" ")])}))],2)],1)},y=[],b={name:"Card",props:{card:{type:Object,required:!0},active:{type:Boolean,required:!0},alt:{type:Boolean,default:!1},stackNames:{type:Array,default:()=>[]}},computed:{...(0,f.rn)(["shift","godMode"]),disabled(){return!(this.godMode||this.active||this.alt&&this.shift)}},methods:{onClick(){this.godMode||this.$emit("click",this.card,this.alt&&this.shift)},onGodModeClick(t){this.$emit("god-mode-click",this.card,t)}}},C=b,S=(0,r.Z)(C,k,y,!1,null,"77a530d0",null),w=S.exports,G={name:"Stack",components:{Card:w},props:{stack:{type:Object,required:!0},alt:{type:Boolean,default:!1},active:{type:Boolean,default:!1},showNames:{type:Boolean,default:!1},stackNames:{type:Array,default:()=>[]}},computed:{...(0,f.Se)(["cities"]),cardsByCity(){const t={};for(const e of this.cities)t[e.name]=[];for(const e of this.stack.cards)t[e.cityName].push(e);return t}},methods:{...(0,f.nv)(["setHighlight"]),onClick(t,e){this.$emit("move-card",t,e)},onGodModeClick(t,e){this.$emit("god-mode-move-card",t,e)},onMouseover(t){this.setHighlight({cityName:t,highlight:!0})},onMouseleave(t){this.setHighlight({cityName:t,highlight:!1})}}},_=G,M=(0,r.Z)(_,g,p,!1,null,"60231439",null),N=M.exports,x={name:"Board",components:{Stack:N},data(){return{stacks:[],cardCount:0,newCity:"",loadGameFile:null,loadGameState:""}},computed:{...(0,f.Se)(["cities"]),gameStarted(){return!!this.stacks.length},numStacks(){return this.stacks.length-3},discardIndex(){return this.stacks.length-2},deck(){return this.stacks[0]},discard(){return this.stacks[this.discardIndex]},stackNames(){return this.stacks.map((t=>t.name))},saveGameState(){return JSON.stringify({stacks:this.stacks,cardCount:this.cardCount,cities:this.cities})}},methods:{...(0,f.nv)(["addCity","removeCity","changeCityCount","setShift","toggleGodMode","setCities"]),async onNewGame(){let t=!0;this.gameStarted&&(t=await this.$bvModal.msgBoxConfirm("This will clear the current game. Are you sure you want to start a new one?")),t&&(this.stacks=[],this.cardCount=0,this.$bvModal.show("modal-new-game"))},onAddCity(){this.addCity({name:this.newCity,count:3,highlight:!1}),this.newCity=""},newGame(){this.stacks.push(this.createDeck()),this.stacks.push(this.createStack("Discard")),this.stacks.push(this.createStack("Removed")),this.autoSave()},createDeck(){const t=this.createStack("Deck");for(const e of this.cities)for(let a=0;a<e.count;a++){this.cardCount++;const a={id:this.cardCount,cityName:e.name};t.cards.push(a)}return t},createStack(t){return{name:t,cards:[]}},clearEmptyStack(){this.numStacks&&!this.stacks[this.numStacks].cards.length&&this.stacks.splice(this.numStacks,1)},hasAlt(t){return"Deck"===t.name||"Discard"===t.name},onMoveCard(t,e,a){let i;if("Deck"===t.name){if(a)return void this.epidemic(e);i="Discard"}else if(t.name.startsWith("Stack "))i="Discard";else{if("Discard"!==t.name||!a)return;i="Removed"}const o=this.stacks.find((t=>t.name===i));this.moveCard(e,t,o),this.clearEmptyStack(),this.autoSave()},onGodModeMoveCard(t,e,a){const i=this.stacks.find((t=>t.name===a));this.moveCard(e,t,i),this.clearEmptyStack(),this.autoSave()},moveCard(t,e,a){const i=e.cards.indexOf(t);a.cards.push(e.cards.splice(i,1)[0])},epidemic(t){const e=this.createStack(`Stack ${this.numStacks+1}`);this.moveCard(t,this.deck,e);while(this.discard.cards.length)this.moveCard(this.discard.cards[0],this.discard,e);this.stacks.splice(this.discardIndex,0,e),this.autoSave()},async copyGameState(){await navigator.clipboard.writeText(this.saveGameState)},downloadGameState(){const t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.saveGameState)),t.setAttribute("download",`pandemic save ${(new Date).toISOString()}.txt`),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},async loadGame(){let t;this.loadGameFile?(t=JSON.parse(await this.loadGameFile.text()),this.loadGameFile=null):(t=JSON.parse(this.loadGameState),this.loadGameState=""),this.loadGameData(t)},loadGameData(t){this.stacks=t.stacks,this.cardCount=t.cardCount,this.setCities(t.cities),this.autoSave()},autoSave(){localStorage.saveGame=this.saveGameState},autoLoad(){localStorage.saveGame&&this.loadGameData(JSON.parse(localStorage.saveGame))}},mounted(){document.addEventListener("keydown",(t=>{"Shift"===t.key&&this.setShift(!0)})),document.addEventListener("keyup",(t=>{"Shift"===t.key&&this.setShift(!1)})),this.autoLoad()}},O=x,D=(0,r.Z)(O,h,v,!1,null,"71a03da4",null),E=D.exports;i["default"].use(u.Z);const $=[{path:"/",name:"home",component:E}],j=new u.Z({mode:"history",base:"/",routes:$});var A=j;i["default"].use(f.ZP);var B=new f.ZP.Store({state:{cities:[{name:"* hollow men *",count:4,highlight:!1},{name:"new york",count:3,highlight:!1},{name:"washington",count:3,highlight:!1},{name:"london",count:3,highlight:!1},{name:"jacksonville",count:3,highlight:!1},{name:"sao paulo",count:3,highlight:!1},{name:"lagos",count:3,highlight:!1},{name:"tripoli",count:3,highlight:!1},{name:"istanbul",count:3,highlight:!1},{name:"cairo",count:3,highlight:!1}],shift:!1,godMode:!1},getters:{getCityByName:t=>e=>t.cities.find((t=>t.name===e)),cities(t){return t.cities.sort(((t,e)=>t.name<e.name?-1:t.name>e.name?1:0))}},mutations:{setCities(t,e){t.cities=e},addCity(t,e){t.cities.push(e)},removeCity(t,e){const a=t.cities.findIndex((t=>t.name===e));t.cities.splice(a,1)},changeCityCount(t,{cityName:e,count:a}){const i=t.cities.find((t=>t.name===e));i.count=i.count+a},setShift(t,e){t.shift=e},setHighlight(t,{cityName:e,highlight:a}){const i=t.cities.find((t=>t.name===e));i.highlight=a},toggleGodMode(t){t.godMode=!t.godMode}},actions:{setCities({commit:t},e){t("setCities",e)},addCity({commit:t},e){t("addCity",e)},removeCity({commit:t},e){t("removeCity",e)},changeCityCount({commit:t},{cityName:e,count:a}){t("changeCityCount",{cityName:e,count:a})},setShift({commit:t},e){t("setShift",e)},setHighlight({commit:t},{cityName:e,highlight:a}){t("setHighlight",{cityName:e,highlight:a})},toggleGodMode({commit:t}){t("toggleGodMode")}},modules:{}});a(44);i["default"].config.productionTip=!1,i["default"].use(o.XG7),i["default"].use(s.X),new i["default"]({router:A,store:B,render:t=>t(m)}).$mount("#app")}},e={};function a(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,i,o,s){if(!i){var n=1/0;for(l=0;l<t.length;l++){i=t[l][0],o=t[l][1],s=t[l][2];for(var c=!0,r=0;r<i.length;r++)(!1&s||n>=s)&&Object.keys(a.O).every((function(t){return a.O[t](i[r])}))?i.splice(r--,1):(c=!1,s<n&&(n=s));if(c){t.splice(l--,1);var d=o();void 0!==d&&(e=d)}}return e}s=s||0;for(var l=t.length;l>0&&t[l-1][2]>s;l--)t[l]=t[l-1];t[l]=[i,o,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,s,n=i[0],c=i[1],r=i[2],d=0;if(n.some((function(e){return 0!==t[e]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(r)var l=r(a)}for(e&&e(i);d<n.length;d++)s=n[d],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(l)},i=self["webpackChunkPandemic"]=self["webpackChunkPandemic"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(6764)}));i=a.O(i)})();
//# sourceMappingURL=app.983cd9b5.js.map
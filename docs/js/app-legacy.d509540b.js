(function(){"use strict";var t={6764:function(t,e,a){a(6992),a(8674),a(9601),a(7727);var n=a(8935),i=a(8262),o=a(3266),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],c=a(1001),u={},d=(0,c.Z)(u,s,r,!1,null,null,null),l=d.exports,m=a(2809),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("b-button-group",{staticClass:"mb-3 game-menu"},[a("b-button",{attrs:{variant:"danger"}},[a("span",{staticClass:"font-weight-bold"},[t._v("Pandemic")])]),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"New Game"},on:{click:t.onNewGame}},[a("b-icon-plus-square")],1),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-save-game",modifiers:{"modal-save-game":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"Export Game"}},[a("b-icon-download")],1),a("b-modal",{attrs:{id:"modal-save-game",title:"Export Game",size:"xl","hide-footer":""}},[a("div",{staticClass:"d-flex align-items-center mb-2"},[t._v(" Download a save game file "),a("b-button",{staticClass:"ml-2",attrs:{size:"sm"},on:{click:t.downloadGameState}},[a("b-icon-download"),t._v(" Download ")],1)],1),a("div",{staticClass:"d-flex align-items-center"},[t._v(" Or copy the following and save it in a text file "),a("b-button",{staticClass:"ml-2",attrs:{size:"sm"},on:{click:t.copyGameState}},[a("b-icon-files"),t._v(" Copy ")],1)],1),a("div",{staticClass:"p-3 text-monospace save-game-container"},[t._v(" "+t._s(t.saveGameState)+" ")])]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-load-game",modifiers:{"modal-load-game":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"Import Game"}},[a("b-icon-upload")],1),a("b-modal",{attrs:{id:"modal-load-game",title:"Import Game",size:"xl","ok-title":"Import"},on:{ok:t.loadGame}},[a("b-form-file",{staticClass:"mb-3",attrs:{accept:".txt",placeholder:"Choose a save game file...","drop-placeholder":"Drop save game file here..."},model:{value:t.loadGameFile,callback:function(e){t.loadGameFile=e},expression:"loadGameFile"}}),a("b-textarea",{attrs:{rows:"5",placeholder:"Or paste in the saved game state"},model:{value:t.loadGameState,callback:function(e){t.loadGameState=e},expression:"loadGameState"}})],1),a("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{variant:"outline-danger",title:"God Mode"},on:{click:t.toggleGodMode}},[a("b-icon-lightning")],1),a("b-modal",{attrs:{id:"modal-new-game",title:"Setup Game"},on:{ok:t.newGame}},[a("div",{staticClass:"container-fluid"},[a("b-form",{on:{submit:function(e){return e.preventDefault(),t.onAddCity.apply(null,arguments)}}},[a("b-form-input",{attrs:{placeholder:"Add new city..."},model:{value:t.newCity,callback:function(e){t.newCity=e},expression:"newCity"}})],1),t._l(t.cities,(function(e){return a("div",{key:e.name,staticClass:"row row-city-setup my-1"},[a("div",{staticClass:"col"},[t._v(" "+t._s(e.name)+" ")]),a("div",{staticClass:"col"},[a("b-button-group",[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.changeCityCount({cityName:e.name,count:-1})}}},[t._v(" - ")]),a("b-button",{staticClass:"city-setup-count",attrs:{variant:"outline-dark",disabled:"",size:"sm"}},[t._v(" "+t._s(e.count)+" ")]),a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.changeCityCount({cityName:e.name,count:1})}}},[t._v(" + ")])],1)],1),a("div",{staticClass:"col"},[a("b-button",{attrs:{size:"sm"},on:{click:function(a){return t.removeCity(e.name)}}},[t._v(" Ã— ")])],1)])}))],2)])],1),a("div",{staticClass:"board"},[t.gameStarted?a("stack",{attrs:{stack:t.createStack("Cities"),"show-names":""}}):t._e(),t._l(t.stacks,(function(e,n){return a("stack",{key:n,attrs:{stack:e,alt:t.hasAlt(e),active:n===t.numStacks,"stack-names":t.stackNames},on:{"move-card":function(a,n){return t.onMoveCard(e,a,n)},"god-mode-move-card":function(a,n){return t.onGodModeMoveCard(e,a,n)}}})}))],2)],1)},f=[],v=a(7965),g=a(7906),p=a(6198),k=a(3019),y=(a(1249),a(8309),a(8862),a(561),a(6755),a(9826),a(1539),a(4665)),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stack"},[a("h2",[t._v(t._s(t.stack.name))]),t._l(t.cities,(function(e){return a("div",{key:e.name,staticClass:"city-row",class:e.highlight?"highlight":"",on:{mouseover:function(){return t.onMouseover(e.name)},mouseleave:function(){return t.onMouseleave(e.name)}}},[t.showNames?a("span",[t._v(t._s(e.name))]):t._e(),t._l(t.cardsByCity[e.name],(function(e){return a("card",{key:e.id,attrs:{card:e,alt:t.alt,active:t.active,"stack-names":t.stackNames},on:{click:t.onClick,"god-mode-click":t.onGodModeClick}})}))],2)}))],2)},C=[],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-button",{staticClass:"p-card mx-1 px-0",attrs:{id:"card-"+t.card.id,variant:t.godMode?"success":t.disabled?"secondary":t.alt&&t.shift?"danger":"primary",disabled:t.disabled},on:{click:t.onClick}},[t.godMode?[t._v(" "+t._s(t.card.id)+" ")]:t._e()],2),a("b-popover",{attrs:{target:"card-"+t.card.id,triggers:"focus",disabled:!t.godMode}},[a("h5",[t._v("Move card to")]),t._l(t.stackNames,(function(e){return a("b-button",{key:e,attrs:{size:"sm",block:""},on:{click:function(a){return t.onGodModeClick(e)}}},[t._v(" "+t._s(e)+" ")])}))],2)],1)},w=[],G={name:"Card",props:{card:{type:Object,required:!0},active:{type:Boolean,required:!0},alt:{type:Boolean,default:!1},stackNames:{type:Array,default:function(){return[]}}},computed:(0,k.Z)((0,k.Z)({},(0,y.rn)(["shift","godMode"])),{},{disabled:function(){return!(this.godMode||this.active||this.alt&&this.shift)}}),methods:{onClick:function(){this.godMode||this.$emit("click",this.card,this.alt&&this.shift)},onGodModeClick:function(t){this.$emit("god-mode-click",this.card,t)}}},_=G,x=(0,c.Z)(_,S,w,!1,null,"77a530d0",null),M=x.exports,N={name:"Stack",components:{Card:M},props:{stack:{type:Object,required:!0},alt:{type:Boolean,default:!1},active:{type:Boolean,default:!1},showNames:{type:Boolean,default:!1},stackNames:{type:Array,default:function(){return[]}}},computed:(0,k.Z)((0,k.Z)({},(0,y.Se)(["cities"])),{},{cardsByCity:function(){var t,e={},a=(0,v.Z)(this.cities);try{for(a.s();!(t=a.n()).done;){var n=t.value;e[n.name]=[]}}catch(r){a.e(r)}finally{a.f()}var i,o=(0,v.Z)(this.stack.cards);try{for(o.s();!(i=o.n()).done;){var s=i.value;e[s.cityName].push(s)}}catch(r){o.e(r)}finally{o.f()}return e}}),methods:(0,k.Z)((0,k.Z)({},(0,y.nv)(["setHighlight"])),{},{onClick:function(t,e){this.$emit("move-card",t,e)},onGodModeClick:function(t,e){this.$emit("god-mode-move-card",t,e)},onMouseover:function(t){this.setHighlight({cityName:t,highlight:!0})},onMouseleave:function(t){this.setHighlight({cityName:t,highlight:!1})}})},Z=N,O=(0,c.Z)(Z,b,C,!1,null,"60231439",null),D=O.exports,E={name:"Board",components:{Stack:D},data:function(){return{stacks:[],cardCount:0,newCity:"",loadGameFile:null,loadGameState:""}},computed:(0,k.Z)((0,k.Z)({},(0,y.Se)(["cities"])),{},{gameStarted:function(){return!!this.stacks.length},numStacks:function(){return this.stacks.length-3},discardIndex:function(){return this.stacks.length-2},deck:function(){return this.stacks[0]},discard:function(){return this.stacks[this.discardIndex]},stackNames:function(){return this.stacks.map((function(t){return t.name}))},saveGameState:function(){return JSON.stringify({stacks:this.stacks,cardCount:this.cardCount,cities:this.cities})}}),methods:(0,k.Z)((0,k.Z)({},(0,y.nv)(["addCity","removeCity","changeCityCount","setShift","toggleGodMode","setCities"])),{},{onNewGame:function(){var t=this;return(0,p.Z)((0,g.Z)().mark((function e(){var a;return(0,g.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!0,!t.gameStarted){e.next=5;break}return e.next=4,t.$bvModal.msgBoxConfirm("This will clear the current game. Are you sure you want to start a new one?");case 4:a=e.sent;case 5:a&&(t.stacks=[],t.cardCount=0,t.$bvModal.show("modal-new-game"));case 6:case"end":return e.stop()}}),e)})))()},onAddCity:function(){this.addCity({name:this.newCity,count:3,highlight:!1}),this.newCity=""},newGame:function(){this.stacks.push(this.createDeck()),this.stacks.push(this.createStack("Discard")),this.stacks.push(this.createStack("Removed")),this.autoSave()},createDeck:function(){var t,e=this.createStack("Deck"),a=(0,v.Z)(this.cities);try{for(a.s();!(t=a.n()).done;)for(var n=t.value,i=0;i<n.count;i++){this.cardCount++;var o={id:this.cardCount,cityName:n.name};e.cards.push(o)}}catch(s){a.e(s)}finally{a.f()}return e},createStack:function(t){return{name:t,cards:[]}},clearEmptyStack:function(){this.numStacks&&!this.stacks[this.numStacks].cards.length&&this.stacks.splice(this.numStacks,1)},hasAlt:function(t){return"Deck"===t.name||"Discard"===t.name},onMoveCard:function(t,e,a){var n;if("Deck"===t.name){if(a)return void this.epidemic(e);n="Discard"}else if(t.name.startsWith("Stack "))n="Discard";else{if("Discard"!==t.name||!a)return;n="Removed"}var i=this.stacks.find((function(t){return t.name===n}));this.moveCard(e,t,i),this.clearEmptyStack(),this.autoSave()},onGodModeMoveCard:function(t,e,a){var n=this.stacks.find((function(t){return t.name===a}));this.moveCard(e,t,n),this.clearEmptyStack(),this.autoSave()},moveCard:function(t,e,a){var n=e.cards.indexOf(t);a.cards.push(e.cards.splice(n,1)[0])},epidemic:function(t){var e=this.createStack("Stack ".concat(this.numStacks+1));this.moveCard(t,this.deck,e);while(this.discard.cards.length)this.moveCard(this.discard.cards[0],this.discard,e);this.stacks.splice(this.discardIndex,0,e),this.autoSave()},copyGameState:function(){var t=this;return(0,p.Z)((0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t.saveGameState);case 2:case"end":return e.stop()}}),e)})))()},downloadGameState:function(){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(this.saveGameState)),t.setAttribute("download","pandemic save ".concat((new Date).toISOString(),".txt")),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)},loadGame:function(){var t=this;return(0,p.Z)((0,g.Z)().mark((function e(){var a;return(0,g.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.loadGameFile){e.next=9;break}return e.t0=JSON,e.next=4,t.loadGameFile.text();case 4:e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),t.loadGameFile=null,e.next=11;break;case 9:a=JSON.parse(t.loadGameState),t.loadGameState="";case 11:t.loadGameData(a);case 12:case"end":return e.stop()}}),e)})))()},loadGameData:function(t){this.stacks=t.stacks,this.cardCount=t.cardCount,this.setCities(t.cities),this.autoSave()},autoSave:function(){localStorage.saveGame=this.saveGameState},autoLoad:function(){localStorage.saveGame&&this.loadGameData(JSON.parse(localStorage.saveGame))}}),mounted:function(){var t=this;document.addEventListener("keydown",(function(e){"Shift"===e.key&&t.setShift(!0)})),document.addEventListener("keyup",(function(e){"Shift"===e.key&&t.setShift(!1)})),this.autoLoad()}},j=E,$=(0,c.Z)(j,h,f,!1,null,"71a03da4",null),A=$.exports;n["default"].use(m.Z);var B=[{path:"/",name:"home",component:A}],z=new m.Z({mode:"history",base:"/pandemic/",routes:B}),I=z;a(2707),a(4553);n["default"].use(y.ZP);var P=new y.ZP.Store({state:{cities:[{name:"* hollow men *",count:4,highlight:!1},{name:"new york",count:3,highlight:!1},{name:"washington",count:3,highlight:!1},{name:"london",count:3,highlight:!1},{name:"jacksonville",count:3,highlight:!1},{name:"sao paulo",count:3,highlight:!1},{name:"lagos",count:3,highlight:!1},{name:"tripoli",count:3,highlight:!1},{name:"istanbul",count:3,highlight:!1},{name:"cairo",count:3,highlight:!1}],shift:!1,godMode:!1},getters:{getCityByName:function(t){return function(e){return t.cities.find((function(t){return t.name===e}))}},cities:function(t){return t.cities.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}))}},mutations:{setCities:function(t,e){t.cities=e},addCity:function(t,e){t.cities.push(e)},removeCity:function(t,e){var a=t.cities.findIndex((function(t){return t.name===e}));t.cities.splice(a,1)},changeCityCount:function(t,e){var a=e.cityName,n=e.count,i=t.cities.find((function(t){return t.name===a}));i.count=i.count+n},setShift:function(t,e){t.shift=e},setHighlight:function(t,e){var a=e.cityName,n=e.highlight,i=t.cities.find((function(t){return t.name===a}));i.highlight=n},toggleGodMode:function(t){t.godMode=!t.godMode}},actions:{setCities:function(t,e){var a=t.commit;a("setCities",e)},addCity:function(t,e){var a=t.commit;a("addCity",e)},removeCity:function(t,e){var a=t.commit;a("removeCity",e)},changeCityCount:function(t,e){var a=t.commit,n=e.cityName,i=e.count;a("changeCityCount",{cityName:n,count:i})},setShift:function(t,e){var a=t.commit;a("setShift",e)},setHighlight:function(t,e){var a=t.commit,n=e.cityName,i=e.highlight;a("setHighlight",{cityName:n,highlight:i})},toggleGodMode:function(t){var e=t.commit;e("toggleGodMode")}},modules:{}});a(44);n["default"].config.productionTip=!1,n["default"].use(i.XG7),n["default"].use(o.X),new n["default"]({router:I,store:P,render:function(t){return t(l)}}).$mount("#app")}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,o){if(!n){var s=1/0;for(d=0;d<t.length;d++){n=t[d][0],i=t[d][1],o=t[d][2];for(var r=!0,c=0;c<n.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(r=!1,o<s&&(s=o));if(r){t.splice(d--,1);var u=i();void 0!==u&&(e=u)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,o,s=n[0],r=n[1],c=n[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(c)var d=c(a)}for(e&&e(n);u<s.length;u++)o=s[u],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},n=self["webpackChunkPandemic"]=self["webpackChunkPandemic"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(6764)}));n=a.O(n)})();
//# sourceMappingURL=app-legacy.d509540b.js.map